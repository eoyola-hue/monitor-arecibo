<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<meta name="theme-color" content="#0a1628">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Monitor Arecibo">
<meta name="description" content="Monitor meteorolÃ³gico en tiempo real para Arecibo, Puerto Rico. Alertas de inundaciÃ³n, condiciones marÃ­timas y pronÃ³stico NWS.">

<!-- Open Graph (para compartir por WhatsApp/Telegram) -->
<meta property="og:title" content="Monitor MeteorolÃ³gico â€” Arecibo, PR">
<meta property="og:description" content="Alertas NWS en tiempo real: inundaciones, rÃ­os, condiciones marÃ­timas y pronÃ³stico 7 dÃ­as.">
<meta property="og:type" content="website">

<title>ğŸŒ€ Monitor MeteorolÃ³gico â€” Arecibo, PR</title>

<!-- PWA Manifest inline -->
<script>
const manifestData = {
  name: "Monitor MeteorolÃ³gico Arecibo",
  short_name: "Monitor PR",
  description: "Alertas NWS tiempo real â€“ Arecibo, Puerto Rico",
  start_url: "./",
  display: "standalone",
  background_color: "#0a1628",
  theme_color: "#0a1628",
  icons: [
    { src: "https://raw.githubusercontent.com/twitter/twemoji/master/assets/72x72/1f300.png", sizes: "72x72", type: "image/png" },
    { src: "https://raw.githubusercontent.com/twitter/twemoji/master/assets/72x72/1f300.png", sizes: "192x192", type: "image/png" }
  ]
};
const blob = new Blob([JSON.stringify(manifestData)], {type:'application/json'});
const manifestUrl = URL.createObjectURL(blob);
document.addEventListener('DOMContentLoaded', () => {
  const link = document.createElement('link');
  link.rel = 'manifest'; link.href = manifestUrl;
  document.head.appendChild(link);
});
</script>

<link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Barlow+Condensed:wght@300;400;600;700;900&display=swap" rel="stylesheet">

<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   VARIABLES & RESET
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root {
  --navy:   #0a1628;
  --deep:   #0d1f3c;
  --ocean:  #0e3a6e;
  --blue:   #1565c0;
  --cyan:   #00b4d8;
  --teal:   #00e5d4;
  --warn:   #ff6b35;
  --danger: #e63946;
  --safe:   #06d6a0;
  --gold:   #ffd166;
  --text:   #e8f4fd;
  --muted:  #7fa8cc;
  --card:   rgba(13,31,60,0.88);
  --border: rgba(0,180,216,0.18);
}

*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }

html { scroll-behavior: smooth; }

body {
  background: var(--navy);
  color: var(--text);
  font-family: 'Barlow Condensed', sans-serif;
  min-height: 100vh;
  overflow-x: hidden;
}

/* Fondo animado */
body::before {
  content:'';
  position:fixed; inset:0;
  background:
    radial-gradient(ellipse 80% 50% at 20% 30%, rgba(21,101,192,0.18) 0%, transparent 60%),
    radial-gradient(ellipse 60% 40% at 80% 70%, rgba(0,180,216,0.12) 0%, transparent 50%),
    radial-gradient(ellipse 40% 60% at 50% 50%, rgba(0,229,212,0.05) 0%, transparent 70%);
  animation: bgPulse 8s ease-in-out infinite alternate;
  pointer-events:none; z-index:0;
}

/* Grid de fondo */
body::after {
  content:'';
  position:fixed; inset:0;
  background-image:
    linear-gradient(rgba(0,180,216,0.04) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0,180,216,0.04) 1px, transparent 1px);
  background-size: 40px 40px;
  pointer-events:none; z-index:0;
}

@keyframes bgPulse { from{opacity:.6} to{opacity:1} }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HEADER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.header {
  position:sticky; top:0; z-index:100;
  padding: 16px 28px 14px;
  border-bottom: 1px solid var(--border);
  display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:10px;
  background: rgba(10,22,40,0.92);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
}

.header-left h1 {
  font-size: clamp(1.3rem, 4vw, 2rem);
  font-weight:900; letter-spacing:0.06em; text-transform:uppercase;
  line-height:1;
}
.header-left h1 span { color:var(--cyan); }
.header-left p {
  font-family:'Space Mono',monospace;
  font-size:clamp(0.5rem, 1.5vw, 0.65rem);
  color:var(--muted); letter-spacing:0.12em; margin-top:4px; text-transform:uppercase;
}

.header-right { display:flex; flex-direction:column; align-items:flex-end; gap:4px; }

#clock {
  font-family:'Space Mono',monospace;
  font-size:clamp(1rem, 3vw, 1.6rem);
  color:var(--cyan); letter-spacing:0.05em; font-weight:700;
}
#date-display {
  font-family:'Space Mono',monospace;
  font-size:clamp(0.5rem, 1.5vw, 0.62rem);
  color:var(--muted); letter-spacing:0.1em; text-transform:uppercase;
}

.header-btns { display:flex; gap:8px; }

.hdr-btn {
  background:var(--ocean); color:var(--cyan);
  border:1px solid var(--border);
  padding:5px 12px;
  font-family:'Space Mono',monospace; font-size:0.58rem; letter-spacing:0.1em;
  cursor:pointer; transition:all .2s; text-transform:uppercase; white-space:nowrap;
}
.hdr-btn:hover { background:var(--blue); border-color:var(--cyan); }
.hdr-btn.active { background:var(--blue); border-color:var(--cyan); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TABS NAVEGACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.tabs {
  display:flex; gap:0;
  background: rgba(10,22,40,0.7);
  border-bottom:1px solid var(--border);
  position:sticky; top:62px; z-index:90;
  overflow-x:auto;
  scrollbar-width:none;
}
.tabs::-webkit-scrollbar { display:none; }

.tab {
  padding:10px 20px;
  font-family:'Space Mono',monospace; font-size:0.62rem;
  letter-spacing:0.12em; text-transform:uppercase;
  color:var(--muted); cursor:pointer;
  border-bottom:2px solid transparent;
  white-space:nowrap; transition:all .2s;
  background:transparent; border-top:none; border-left:none; border-right:none;
}
.tab:hover { color:var(--text); }
.tab.active { color:var(--cyan); border-bottom-color:var(--cyan); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAIN LAYOUT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.main {
  position:relative; z-index:5;
  padding: 24px 28px;
  max-width:1400px; margin:0 auto;
}

/* Panels (tabs content) */
.panel { display:none; }
.panel.active { display:block; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ALERTA BANNER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#alert-banner { margin-bottom:24px; display:none; }

.alert-item {
  background:linear-gradient(135deg,rgba(230,57,70,.15),rgba(230,57,70,.05));
  border:1px solid rgba(230,57,70,.5);
  border-left:4px solid var(--danger);
  padding:12px 18px; margin-bottom:8px;
  animation:alertPulse 2s ease-in-out infinite;
}
.alert-item.warn {
  background:linear-gradient(135deg,rgba(255,107,53,.15),rgba(255,107,53,.05));
  border-color:rgba(255,107,53,.5); border-left-color:var(--warn);
  animation:warnPulse 3s ease-in-out infinite;
}
.alert-item.advisory {
  background:linear-gradient(135deg,rgba(255,209,102,.1),rgba(255,209,102,.03));
  border-color:rgba(255,209,102,.4); border-left-color:var(--gold);
  animation:none;
}
@keyframes alertPulse { 0%,100%{border-left-color:var(--danger)} 50%{border-left-color:rgba(230,57,70,.3)} }
@keyframes warnPulse  { 0%,100%{border-left-color:var(--warn)}   50%{border-left-color:rgba(255,107,53,.3)} }

.alert-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:4px; flex-wrap:wrap; gap:4px; }
.alert-type { font-family:'Space Mono',monospace; font-size:0.62rem; letter-spacing:.12em; text-transform:uppercase; font-weight:700; }
.alert-item   .alert-type { color:var(--danger); }
.alert-item.warn .alert-type { color:var(--warn); }
.alert-item.advisory .alert-type { color:var(--gold); }
.alert-expires { font-family:'Space Mono',monospace; font-size:0.58rem; color:var(--muted); }
.alert-title { font-size:0.92rem; font-weight:700; letter-spacing:.04em; text-transform:uppercase; margin-bottom:2px; }
.alert-desc { font-family:'Space Mono',monospace; font-size:0.62rem; color:var(--muted); line-height:1.5; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   GRIDS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.grid-3 { display:grid; grid-template-columns:repeat(3,1fr); gap:18px; margin-bottom:18px; }
.grid-2 { display:grid; grid-template-columns:2fr 1fr; gap:18px; margin-bottom:18px; }
.grid-2b { display:grid; grid-template-columns:1fr 1fr; gap:18px; margin-bottom:18px; }
.grid-1 { margin-bottom:18px; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CARDS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.card {
  background:var(--card);
  border:1px solid var(--border);
  backdrop-filter:blur(10px);
  padding:18px 20px;
  position:relative; overflow:hidden;
  transition:border-color .3s;
}
.card::before {
  content:''; position:absolute;
  top:0; left:0; right:0; height:2px;
  background:linear-gradient(90deg, var(--cyan), transparent);
}
.card:hover { border-color:rgba(0,180,216,.4); }
.card.danger-card::before { background:linear-gradient(90deg,var(--danger),transparent); }
.card.warn-card::before { background:linear-gradient(90deg,var(--warn),transparent); }
.card.safe-card::before { background:linear-gradient(90deg,var(--safe),transparent); }
.card.teal-card::before { background:linear-gradient(90deg,var(--teal),transparent); }

.card-label {
  font-family:'Space Mono',monospace; font-size:0.58rem;
  letter-spacing:.18em; text-transform:uppercase; color:var(--muted);
  margin-bottom:12px; display:flex; align-items:center; gap:8px;
}
.card-label::after { content:''; flex:1; height:1px; background:var(--border); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BIG VALUES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.big-value { font-size:clamp(2rem,5vw,3.5rem); font-weight:900; letter-spacing:-.02em; line-height:1; }
.big-unit { font-size:1rem; color:var(--muted); font-weight:300; margin-left:4px; }
.sub-info { font-family:'Space Mono',monospace; font-size:0.6rem; color:var(--muted); margin-top:8px; letter-spacing:.05em; }

.status-indicator { display:inline-flex; align-items:center; gap:6px; font-size:0.75rem; font-weight:700; letter-spacing:.1em; text-transform:uppercase; margin-top:8px; }
.dot { width:8px; height:8px; border-radius:50%; animation:blink 1.5s ease-in-out infinite; flex-shrink:0; }
.dot.safe   { background:var(--safe);   box-shadow:0 0 8px var(--safe); }
.dot.warn   { background:var(--warn);   box-shadow:0 0 8px var(--warn); }
.dot.danger { background:var(--danger); box-shadow:0 0 8px var(--danger); }
.dot.info   { background:var(--cyan);   box-shadow:0 0 8px var(--cyan); }
.dot.gold   { background:var(--gold);   box-shadow:0 0 8px var(--gold); }
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:.35} }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FORECAST DAYS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.forecast-grid { display:grid; grid-template-columns:repeat(7,1fr); gap:8px; }
.forecast-day {
  background:rgba(14,58,110,.4); border:1px solid var(--border);
  padding:12px 6px; text-align:center; transition:all .2s; cursor:default;
}
.forecast-day:hover { background:rgba(21,101,192,.4); border-color:rgba(0,180,216,.4); }
.forecast-day .day-name { font-family:'Space Mono',monospace; font-size:0.6rem; color:var(--muted); text-transform:uppercase; letter-spacing:.08em; margin-bottom:6px; }
.forecast-day .day-icon { font-size:1.5rem; display:block; margin-bottom:4px; }
.forecast-day .day-temp { font-size:1.2rem; font-weight:700; }
.forecast-day .day-rain { font-family:'Space Mono',monospace; font-size:0.58rem; margin-top:4px; }
.forecast-day .day-short { font-size:0.6rem; color:var(--muted); margin-top:4px; line-height:1.3; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MARITIME TABLE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.maritime-table { width:100%; border-collapse:collapse; font-family:'Space Mono',monospace; font-size:0.65rem; }
.maritime-table td { padding:8px 0; border-bottom:1px solid var(--border); vertical-align:middle; }
.maritime-table td:first-child { color:var(--muted); width:45%; text-transform:uppercase; letter-spacing:.06em; }
.maritime-table td:last-child { color:var(--text); font-weight:700; font-size:0.78rem; text-align:right; }
.marine-level { padding:2px 8px; font-size:0.58rem; font-weight:700; letter-spacing:.1em; text-transform:uppercase; }
.marine-level.danger { background:rgba(230,57,70,.2); color:var(--danger); border:1px solid var(--danger); }
.marine-level.warn   { background:rgba(255,107,53,.2); color:var(--warn);   border:1px solid var(--warn); }
.marine-level.safe   { background:rgba(6,214,160,.2);  color:var(--safe);   border:1px solid var(--safe); }
.marine-level.info   { background:rgba(0,180,216,.2);  color:var(--cyan);   border:1px solid var(--cyan); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   GAUGE INUNDACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.gauge-bar { width:100%; height:14px; background:rgba(14,58,110,.5); border:1px solid var(--border); position:relative; overflow:hidden; margin-bottom:14px; }
.gauge-fill { height:100%; transition:width 1.5s cubic-bezier(.4,0,.2,1); position:relative; }
.gauge-fill::after { content:''; position:absolute; right:0; top:0; bottom:0; width:2px; background:white; box-shadow:0 0 8px white; }
.gauge-labels { display:flex; justify-content:space-between; font-family:'Space Mono',monospace; font-size:0.5rem; color:var(--muted); text-transform:uppercase; letter-spacing:.06em; width:100%; margin-bottom:10px; }
.risk-value { font-size:2.2rem; font-weight:900; text-align:center; }
.risk-label { font-size:0.8rem; font-weight:700; letter-spacing:.15em; text-transform:uppercase; text-align:center; margin-top:2px; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RÃOS TABLE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.rivers-table { width:100%; border-collapse:collapse; }
.rivers-table th { font-family:'Space Mono',monospace; font-size:0.58rem; color:var(--cyan); text-transform:uppercase; letter-spacing:.1em; padding:8px 10px; border-bottom:1px solid var(--border); text-align:left; }
.rivers-table td { font-family:'Space Mono',monospace; font-size:0.65rem; padding:9px 10px; border-bottom:1px solid rgba(0,180,216,.08); vertical-align:middle; }
.rivers-table tr:hover td { background:rgba(14,58,110,.3); }
.rivers-table a { color:var(--cyan); text-decoration:none; }
.rivers-table a:hover { color:var(--teal); text-decoration:underline; }
.river-status { padding:2px 8px; font-size:0.55rem; font-weight:700; letter-spacing:.1em; text-transform:uppercase; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESOURCES GRID
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.resources-grid { display:grid; grid-template-columns:repeat(3,1fr); gap:10px; margin-top:4px; }
.res-card {
  display:block; background:rgba(14,58,110,.4); border:1px solid var(--border);
  padding:14px 12px; text-decoration:none; color:var(--text); transition:all .2s;
}
.res-card:hover { background:rgba(21,101,192,.4); border-color:rgba(0,180,216,.4); }
.res-card .res-icon { font-size:1.5rem; margin-bottom:6px; display:block; }
.res-card .res-name { font-weight:700; font-size:0.82rem; letter-spacing:.04em; display:block; margin-bottom:2px; }
.res-card .res-url  { font-family:'Space Mono',monospace; font-size:0.55rem; color:var(--muted); display:block; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BOYAS / NDBC
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.buoy-grid { display:grid; grid-template-columns:1fr 1fr; gap:10px; }
.buoy-card { background:rgba(14,58,110,.4); border:1px solid var(--border); padding:12px; }
.buoy-name { font-weight:700; font-size:0.82rem; color:var(--cyan); letter-spacing:.04em; margin-bottom:6px; }
.buoy-data { font-family:'Space Mono',monospace; font-size:0.62rem; color:var(--muted); line-height:1.8; }
.buoy-data span { color:var(--text); font-weight:700; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RIBBON / BADGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.ribbon { position:absolute; top:12px; right:-28px; background:var(--danger); color:white; font-family:'Space Mono',monospace; font-size:0.52rem; letter-spacing:.1em; text-transform:uppercase; padding:3px 36px; transform:rotate(45deg); font-weight:700; display:none; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BOTTOM BAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.bottom-bar {
  background:rgba(13,31,60,.7); border-top:1px solid var(--border);
  padding:12px 28px; display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:8px;
  position:relative; z-index:5;
}
.sources { display:flex; gap:16px; flex-wrap:wrap; align-items:center; }
.sources .lbl { font-family:'Space Mono',monospace; font-size:0.55rem; color:var(--muted); letter-spacing:.15em; text-transform:uppercase; }
.sources a { color:var(--cyan); text-decoration:none; font-family:'Space Mono',monospace; font-size:0.6rem; transition:color .2s; }
.sources a:hover { color:var(--teal); }
#last-updated { font-family:'Space Mono',monospace; font-size:0.56rem; color:var(--muted); letter-spacing:.06em; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INSTALL BANNER (PWA)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#install-banner {
  display:none; position:fixed; bottom:16px; left:50%; transform:translateX(-50%);
  background:var(--ocean); border:1px solid var(--cyan); color:var(--text);
  padding:12px 20px; z-index:200; max-width:360px; width:90%;
  text-align:center; box-shadow:0 8px 32px rgba(0,0,0,.5);
}
#install-banner p { font-size:0.78rem; margin-bottom:10px; line-height:1.5; }
#install-banner .btn-row { display:flex; gap:10px; justify-content:center; }
#install-banner button { font-family:'Space Mono',monospace; font-size:0.6rem; letter-spacing:.1em; text-transform:uppercase; padding:7px 16px; cursor:pointer; border:1px solid var(--cyan); }
#install-banner #btn-install { background:var(--cyan); color:var(--navy); }
#install-banner #btn-dismiss { background:transparent; color:var(--muted); border-color:var(--border); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SPINNER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.spin { display:inline-block; width:12px; height:12px; border:2px solid var(--border); border-top-color:var(--cyan); border-radius:50%; animation:spin .8s linear infinite; margin-left:6px; vertical-align:middle; }
@keyframes spin { to{transform:rotate(360deg)} }
.loading-text { font-family:'Space Mono',monospace; font-size:0.68rem; color:var(--muted); letter-spacing:.08em; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESPONSIVE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media (max-width:900px) {
  .grid-3  { grid-template-columns:1fr 1fr; }
  .grid-2  { grid-template-columns:1fr; }
  .grid-2b { grid-template-columns:1fr; }
  .forecast-grid { grid-template-columns:repeat(4,1fr); }
  .resources-grid { grid-template-columns:1fr 1fr; }
  .buoy-grid { grid-template-columns:1fr; }
  .main { padding:16px; }
}
@media (max-width:600px) {
  .grid-3 { grid-template-columns:1fr; }
  .forecast-grid { grid-template-columns:repeat(3,1fr); }
  .resources-grid { grid-template-columns:1fr 1fr; }
  .header { padding:12px 16px; }
  .main { padding:12px; }
  .tabs .tab { padding:8px 14px; font-size:0.58rem; }
}
</style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• HEADER â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<header class="header">
  <div class="header-left">
    <h1>ğŸŒ€ MONITOR <span>METEORO</span>LÃ“GICO</h1>
    <p>ğŸ“ Arecibo, Puerto Rico &nbsp;Â·&nbsp; 18.4736Â°N 66.7220Â°W &nbsp;Â·&nbsp; NWS San Juan</p>
  </div>
  <div class="header-right">
    <div id="clock">--:--:--</div>
    <div id="date-display">Cargando...</div>
    <div class="header-btns">
      <button class="hdr-btn" onclick="loadAllData()" id="refresh-btn">âŸ³ Actualizar</button>
      <button class="hdr-btn" onclick="showInstallPrompt()" id="install-btn" style="display:none">ğŸ“² Instalar App</button>
    </div>
  </div>
</header>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• TABS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<nav class="tabs">
  <button class="tab active" onclick="switchTab('inicio')">ğŸ  Inicio</button>
  <button class="tab" onclick="switchTab('alertas')">ğŸš¨ Alertas</button>
  <button class="tab" onclick="switchTab('pronostico')">ğŸ“… PronÃ³stico</button>
  <button class="tab" onclick="switchTab('maritimo')">â›µ MarÃ­timo</button>
  <button class="tab" onclick="switchTab('rios')">ğŸŒŠ RÃ­os</button>
  <button class="tab" onclick="switchTab('recursos')">ğŸ”— Recursos</button>
</nav>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• MAIN â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<main class="main">

  <!-- â•â•â•â•â•â•â•â• BANNER DE ALERTAS (siempre visible) â•â•â•â•â•â•â•â• -->
  <div id="alert-banner"></div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       PANEL: INICIO
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="panel-inicio" class="panel active">

    <div class="grid-3">

      <!-- Riesgo InundaciÃ³n -->
      <div class="card teal-card" id="card-flood">
        <div class="card-label">ğŸŒŠ Riesgo InundaciÃ³n Repentina</div>
        <div class="gauge-bar">
          <div class="gauge-fill" id="gauge-fill" style="width:0%"></div>
        </div>
        <div class="gauge-labels">
          <span>BAJO</span><span>MOD.</span><span>ALTO</span><span>EXTR.</span>
        </div>
        <div class="risk-value" id="risk-value">â€”</div>
        <div class="risk-label" id="risk-label">Evaluando...</div>
      </div>

      <!-- Lluvia hoy -->
      <div class="card">
        <div class="card-label">ğŸŒ§ï¸ PrecipitaciÃ³n</div>
        <div id="rain-info"><div class="loading-text">Cargando...<span class="spin"></span></div></div>
      </div>

      <!-- Estado general -->
      <div class="card">
        <div class="card-label">âš¡ Estado del Sistema</div>
        <div id="status-summary"><div class="loading-text">Evaluando...<span class="spin"></span></div></div>
      </div>

    </div>

    <!-- PronÃ³stico rÃ¡pido -->
    <div class="card grid-1">
      <div class="card-label">ğŸ“… PrÃ³ximos 7 DÃ­as</div>
      <div class="forecast-grid" id="forecast-grid-home">
        <div class="loading-text" style="grid-column:1/-1">Cargando pronÃ³stico...<span class="spin"></span></div>
      </div>
    </div>

    <!-- MarÃ­timo + RÃ­os rÃ¡pidos -->
    <div class="grid-2b">
      <div class="card warn-card" id="card-maritime-home">
        <div class="ribbon" id="maritime-ribbon">PELIGRO</div>
        <div class="card-label">ğŸŒŠ Condiciones MarÃ­timas</div>
        <table class="maritime-table" id="maritime-table-home">
          <tr><td>Oleaje</td><td><span class="spin"></span></td></tr>
        </table>
      </div>
      <div class="card teal-card">
        <div class="card-label">ğŸï¸ RÃ­os â€” Acceso RÃ¡pido</div>
        <div style="display:flex;flex-direction:column;gap:8px;margin-top:4px">
          <a href="https://water.weather.gov/ahps2/hydrograph.php?gage=AREP4&wfo=sju" target="_blank" style="display:flex;justify-content:space-between;align-items:center;padding:8px 10px;background:rgba(14,58,110,.5);border:1px solid var(--border);text-decoration:none;transition:all .2s" onmouseover="this.style.borderColor='var(--teal)'" onmouseout="this.style.borderColor='var(--border)'">
            <span style="color:var(--text);font-weight:700;font-size:.82rem">ğŸ“Š RÃ­o Arecibo (AREP4)</span>
            <span style="font-family:'Space Mono',monospace;font-size:.58rem;color:var(--teal)">â†’ NWS AHPS</span>
          </a>
          <a href="https://water.weather.gov/ahps2/hydrograph.php?gage=grap4&wfo=sju" target="_blank" style="display:flex;justify-content:space-between;align-items:center;padding:8px 10px;background:rgba(14,58,110,.5);border:1px solid var(--border);text-decoration:none;transition:all .2s" onmouseover="this.style.borderColor='var(--teal)'" onmouseout="this.style.borderColor='var(--border)'">
            <span style="color:var(--text);font-weight:700;font-size:.82rem">ğŸ“Š RÃ­o Grande Arecibo</span>
            <span style="font-family:'Space Mono',monospace;font-size:.58rem;color:var(--teal)">â†’ NWS AHPS</span>
          </a>
          <a href="https://waterdata.usgs.gov/pr/nwis/rt" target="_blank" style="display:flex;justify-content:space-between;align-items:center;padding:8px 10px;background:rgba(14,58,110,.5);border:1px solid var(--border);text-decoration:none;transition:all .2s" onmouseover="this.style.borderColor='var(--teal)'" onmouseout="this.style.borderColor='var(--border)'">
            <span style="color:var(--text);font-weight:700;font-size:.82rem">ğŸ“ˆ USGS â€” Todos los rÃ­os PR</span>
            <span style="font-family:'Space Mono',monospace;font-size:.58rem;color:var(--teal)">â†’ USGS</span>
          </a>
          <a href="https://www.weather.gov/sju/ahps" target="_blank" style="display:flex;justify-content:space-between;align-items:center;padding:8px 10px;background:rgba(14,58,110,.5);border:1px solid var(--border);text-decoration:none;transition:all .2s" onmouseover="this.style.borderColor='var(--teal)'" onmouseout="this.style.borderColor='var(--border)'">
            <span style="color:var(--text);font-weight:700;font-size:.82rem">ğŸ—ºï¸ Mapa HidrolÃ³gico NWS</span>
            <span style="font-family:'Space Mono',monospace;font-size:.58rem;color:var(--teal)">â†’ NWS SJU</span>
          </a>
        </div>
      </div>
    </div>

  </div><!-- /panel-inicio -->

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       PANEL: ALERTAS
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="panel-alertas" class="panel">
    <div class="card">
      <div class="card-label">ğŸš¨ Todas las Alertas Activas â€” Puerto Rico</div>
      <div id="alerts-detail-full"><div class="loading-text">Buscando alertas...<span class="spin"></span></div></div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       PANEL: PRONÃ“STICO
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="panel-pronostico" class="panel">
    <div class="card grid-1">
      <div class="card-label">ğŸ“… PronÃ³stico Detallado 7 DÃ­as â€” Arecibo</div>
      <div class="forecast-grid" id="forecast-grid-full">
        <div class="loading-text" style="grid-column:1/-1">Cargando...<span class="spin"></span></div>
      </div>
    </div>
    <div class="grid-2b" style="margin-top:0">
      <div class="card">
        <div class="card-label">ğŸŒ™ PronÃ³stico Nocturno</div>
        <div id="night-forecast"><div class="loading-text">Cargando...<span class="spin"></span></div></div>
      </div>
      <div class="card">
        <div class="card-label">ğŸ“‹ DiscusiÃ³n MeteorolÃ³gica</div>
        <div id="forecast-detail"><div class="loading-text">Cargando...<span class="spin"></span></div></div>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       PANEL: MARÃTIMO
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="panel-maritimo" class="panel">
    <div class="grid-2b">
      <div class="card warn-card">
        <div class="ribbon" id="maritime-ribbon-2">PELIGRO</div>
        <div class="card-label">â›µ Condiciones Costa Norte PR â€” Aviso Actual</div>
        <table class="maritime-table" id="maritime-table-full">
          <tr><td>Cargando...</td><td></td></tr>
        </table>
        <div style="margin-top:14px;padding-top:12px;border-top:1px solid var(--border)">
          <div class="sub-info">âš ï¸ Aviso de Embarcaciones PequeÃ±as Vigente</div>
          <div class="sub-info" style="margin-top:4px">Fuente: NWS San Juan â€” PronÃ³stico MarÃ­timo Zona AMZ712</div>
        </div>
      </div>
      <div class="card">
        <div class="card-label">ğŸŒŠ Boyas Cercanas â€” NDBC</div>
        <div class="buoy-grid" id="buoy-grid">
          <div class="loading-text">Cargando boyas...<span class="spin"></span></div>
        </div>
      </div>
    </div>
    <div class="card">
      <div class="card-label">ğŸ”— Recursos MarÃ­timos Oficiales</div>
      <div class="resources-grid">
        <a href="https://www.ndbc.noaa.gov/obs.shtml?lat=18.5&lon=-66.7&zoom=8&type=buoy&status=A" target="_blank" class="res-card">
          <span class="res-icon">ğŸŒŠ</span>
          <span class="res-name">NDBC â€” Boyas PR</span>
          <span class="res-url">ndbc.noaa.gov</span>
        </a>
        <a href="https://www.weather.gov/sju/mz" target="_blank" class="res-card">
          <span class="res-icon">â›µ</span>
          <span class="res-name">PronÃ³stico MarÃ­timo NWS</span>
          <span class="res-url">weather.gov/sju/mz</span>
        </a>
        <a href="https://tides.net/predictions?stationId=9752695" target="_blank" class="res-card">
          <span class="res-icon">ğŸŒŠ</span>
          <span class="res-name">Mareas â€” Arecibo</span>
          <span class="res-url">NOAA Tides & Currents</span>
        </a>
        <a href="https://www.nhc.noaa.gov/" target="_blank" class="res-card">
          <span class="res-icon">ğŸŒ€</span>
          <span class="res-name">NHC Ciclones</span>
          <span class="res-url">nhc.noaa.gov</span>
        </a>
        <a href="https://tidesandcurrents.noaa.gov/stationhome.html?id=9752695" target="_blank" class="res-card">
          <span class="res-icon">ğŸ“Š</span>
          <span class="res-name">EstaciÃ³n Arecibo NOAA</span>
          <span class="res-url">ID: 9752695</span>
        </a>
        <a href="https://coastwatch.pfeg.noaa.gov/" target="_blank" class="res-card">
          <span class="res-icon">ğŸ›°ï¸</span>
          <span class="res-name">CoastWatch NOAA</span>
          <span class="res-url">ImÃ¡genes satelitales</span>
        </a>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       PANEL: RÃOS
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="panel-rios" class="panel">
    <div class="card">
      <div class="card-label">ğŸï¸ Estaciones HidrolÃ³gicas â€” Ãrea Arecibo / Norte PR</div>
      <table class="rivers-table">
        <thead>
          <tr>
            <th>RÃO / ESTACIÃ“N</th>
            <th>CÃ“DIGO</th>
            <th>ESTADO</th>
            <th>NIVEL AHPS</th>
            <th>VER EN VIVO</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="color:var(--text);font-weight:700">RÃ­o Arecibo</td>
            <td>AREP4</td>
            <td><span class="river-status" style="background:rgba(0,180,216,.15);color:var(--cyan);border:1px solid var(--cyan)">MONITOREO</span></td>
            <td><a href="https://water.weather.gov/ahps2/hydrograph.php?gage=AREP4&wfo=sju" target="_blank">â†’ NWS AHPS</a></td>
            <td><a href="https://waterdata.usgs.gov/monitoring-location/50029000/" target="_blank">â†’ USGS #50029000</a></td>
          </tr>
          <tr>
            <td style="color:var(--text);font-weight:700">RÃ­o Grande de Arecibo</td>
            <td>GRAP4</td>
            <td><span class="river-status" style="background:rgba(0,180,216,.15);color:var(--cyan);border:1px solid var(--cyan)">MONITOREO</span></td>
            <td><a href="https://water.weather.gov/ahps2/hydrograph.php?gage=grap4&wfo=sju" target="_blank">â†’ NWS AHPS</a></td>
            <td><a href="https://waterdata.usgs.gov/nwis/rt?site_no=50029000" target="_blank">â†’ USGS Tiempo Real</a></td>
          </tr>
          <tr>
            <td style="color:var(--text);font-weight:700">RÃ­o Camuy</td>
            <td>CMAP4</td>
            <td><span class="river-status" style="background:rgba(0,180,216,.15);color:var(--cyan);border:1px solid var(--cyan)">MONITOREO</span></td>
            <td><a href="https://water.weather.gov/ahps2/hydrograph.php?gage=cmap4&wfo=sju" target="_blank">â†’ NWS AHPS</a></td>
            <td><a href="https://waterdata.usgs.gov/pr/nwis/rt" target="_blank">â†’ USGS PR</a></td>
          </tr>
          <tr>
            <td style="color:var(--text);font-weight:700">RÃ­o Manati</td>
            <td>MNTP4</td>
            <td><span class="river-status" style="background:rgba(0,180,216,.15);color:var(--cyan);border:1px solid var(--cyan)">MONITOREO</span></td>
            <td><a href="https://water.weather.gov/ahps2/hydrograph.php?gage=mntp4&wfo=sju" target="_blank">â†’ NWS AHPS</a></td>
            <td><a href="https://waterdata.usgs.gov/pr/nwis/rt" target="_blank">â†’ USGS PR</a></td>
          </tr>
          <tr>
            <td style="color:var(--text);font-weight:700">RÃ­o Cibuco</td>
            <td>CBCP4</td>
            <td><span class="river-status" style="background:rgba(0,180,216,.15);color:var(--cyan);border:1px solid var(--cyan)">MONITOREO</span></td>
            <td><a href="https://water.weather.gov/ahps2/hydrograph.php?gage=cbcp4&wfo=sju" target="_blank">â†’ NWS AHPS</a></td>
            <td><a href="https://waterdata.usgs.gov/pr/nwis/rt" target="_blank">â†’ USGS PR</a></td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="grid-2b" style="margin-top:0">
      <div class="card">
        <div class="card-label">ğŸ—ºï¸ Mapa HidrolÃ³gico Interactivo</div>
        <div style="display:flex;flex-direction:column;gap:8px">
          <a href="https://water.weather.gov/ahps2/index.php?wfo=sju" target="_blank" style="display:block;background:rgba(14,58,110,.5);border:1px solid var(--border);padding:14px;text-decoration:none;color:var(--text);transition:all .2s" onmouseover="this.style.borderColor='var(--teal)'" onmouseout="this.style.borderColor='var(--border)'">
            <div style="font-size:1.3rem;margin-bottom:4px">ğŸ—ºï¸</div>
            <div style="font-weight:700;font-size:.85rem">NWS AHPS â€” Mapa Puerto Rico</div>
            <div style="font-family:'Space Mono',monospace;font-size:.58rem;color:var(--muted);margin-top:2px">Todas las estaciones en tiempo real</div>
          </a>
          <a href="https://waterdata.usgs.gov/pr/nwis/rt" target="_blank" style="display:block;background:rgba(14,58,110,.5);border:1px solid var(--border);padding:14px;text-decoration:none;color:var(--text);transition:all .2s" onmouseover="this.style.borderColor='var(--teal)'" onmouseout="this.style.borderColor='var(--border)'">
            <div style="font-size:1.3rem;margin-bottom:4px">ğŸ“ˆ</div>
            <div style="font-weight:700;font-size:.85rem">USGS â€” RÃ­os Puerto Rico</div>
            <div style="font-family:'Space Mono',monospace;font-size:.58rem;color:var(--muted);margin-top:2px">Datos de flujo en tiempo real</div>
          </a>
        </div>
      </div>
      <div class="card danger-card">
        <div class="card-label">âš ï¸ SeÃ±ales de Peligro en RÃ­os</div>
        <div style="display:flex;flex-direction:column;gap:8px;font-family:'Space Mono',monospace;font-size:.64rem;line-height:1.7">
          <div style="padding:8px;background:rgba(230,57,70,.1);border-left:3px solid var(--danger)">
            ğŸ”´ <strong style="color:var(--danger)">FLOOD STAGE:</strong> Nivel que causa inundaciones en Ã¡reas bajas
          </div>
          <div style="padding:8px;background:rgba(255,107,53,.1);border-left:3px solid var(--warn)">
            ğŸŸ  <strong style="color:var(--warn)">ACTION STAGE:</strong> Monitoreo intensivo requerido
          </div>
          <div style="padding:8px;background:rgba(255,209,102,.1);border-left:3px solid var(--gold)">
            ğŸŸ¡ <strong style="color:var(--gold)">MINOR FLOOD:</strong> Inundaciones menores posibles
          </div>
          <div style="padding:8px;background:rgba(6,214,160,.1);border-left:3px solid var(--safe)">
            ğŸŸ¢ <strong style="color:var(--safe)">NORMAL:</strong> Nivel dentro de parÃ¡metros seguros
          </div>
          <div style="color:var(--muted);padding-top:4px">
            âš¡ Flash floods pueden desarrollarse en minutos. No cruce rÃ­os crecidos.
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       PANEL: RECURSOS
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="panel-recursos" class="panel">
    <div class="grid-2b">
      <div class="card">
        <div class="card-label">ğŸ“ Contactos de Emergencia</div>
        <div style="display:flex;flex-direction:column;gap:6px">
          <div style="display:flex;justify-content:space-between;align-items:center;padding:10px;background:rgba(230,57,70,.1);border:1px solid rgba(230,57,70,.3)">
            <span style="font-weight:700;font-size:.9rem">ğŸ†˜ Emergencias PR</span>
            <span style="font-family:'Space Mono',monospace;font-size:1.1rem;color:var(--danger);font-weight:700">9-1-1</span>
          </div>
          <div style="display:flex;justify-content:space-between;align-items:center;padding:10px;background:rgba(14,58,110,.4);border:1px solid var(--border)">
            <span style="font-weight:700;font-size:.85rem">ğŸŒ€ NWS San Juan</span>
            <span style="font-family:'Space Mono',monospace;font-size:.85rem;color:var(--cyan)">(787) 253-4586</span>
          </div>
          <div style="display:flex;justify-content:space-between;align-items:center;padding:10px;background:rgba(14,58,110,.4);border:1px solid var(--border)">
            <span style="font-weight:700;font-size:.85rem">ğŸš’ SCEM Puerto Rico</span>
            <span style="font-family:'Space Mono',monospace;font-size:.85rem;color:var(--cyan)">(787) 724-0124</span>
          </div>
          <div style="display:flex;justify-content:space-between;align-items:center;padding:10px;background:rgba(14,58,110,.4);border:1px solid var(--border)">
            <span style="font-weight:700;font-size:.85rem">ğŸ›£ï¸ DTOP Carreteras</span>
            <span style="font-family:'Space Mono',monospace;font-size:.85rem;color:var(--cyan)">(787) 723-3600</span>
          </div>
          <div style="display:flex;justify-content:space-between;align-items:center;padding:10px;background:rgba(14,58,110,.4);border:1px solid var(--border)">
            <span style="font-weight:700;font-size:.85rem">ğŸ¥ Cruz Roja PR</span>
            <span style="font-family:'Space Mono',monospace;font-size:.85rem;color:var(--cyan)">(787) 759-7979</span>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="card-label">ğŸ“± Alertas en tu Celular</div>
        <div style="display:flex;flex-direction:column;gap:8px;font-family:'Space Mono',monospace;font-size:.63rem;line-height:1.8">
          <div style="padding:10px;background:rgba(14,58,110,.4);border:1px solid var(--border)">
            <div style="color:var(--cyan);font-weight:700;margin-bottom:4px">ğŸ“§ EMAIL â€” NWS Alerts</div>
            <a href="https://www.weather.gov/alerts" target="_blank" style="color:var(--teal)">weather.gov/alerts â†’ Puerto Rico</a><br>
            <span style="color:var(--muted)">Suscribirse gratis a Flash Flood, Marine, Surf</span>
          </div>
          <div style="padding:10px;background:rgba(14,58,110,.4);border:1px solid var(--border)">
            <div style="color:var(--cyan);font-weight:700;margin-bottom:4px">ğŸ“² WEA â€” Alertas InalÃ¡mbricas</div>
            <span style="color:var(--muted)">Activar en: ConfiguraciÃ³n â†’ Notificaciones â†’ Alertas de Emergencia</span>
          </div>
          <div style="padding:10px;background:rgba(14,58,110,.4);border:1px solid var(--border)">
            <div style="color:var(--cyan);font-weight:700;margin-bottom:4px">ğŸ¦ NWS en Redes</div>
            <span style="color:var(--muted)">X/Twitter: </span><a href="https://twitter.com/NWSSanJuan" target="_blank" style="color:var(--teal)">@NWSSanJuan</a><br>
            <span style="color:var(--muted)">Facebook: </span><a href="https://facebook.com/NWSSanJuan" target="_blank" style="color:var(--teal)">NWS San Juan</a>
          </div>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="card-label">ğŸ”— Todos los Recursos Oficiales</div>
      <div class="resources-grid">
        <a href="https://www.weather.gov/sju/" target="_blank" class="res-card">
          <span class="res-icon">ğŸŒ€</span><span class="res-name">NWS San Juan</span><span class="res-url">weather.gov/sju</span>
        </a>
        <a href="https://api.weather.gov/alerts/active?area=PR" target="_blank" class="res-card">
          <span class="res-icon">âš¡</span><span class="res-name">API Alertas NWS</span><span class="res-url">Datos en tiempo real JSON</span>
        </a>
        <a href="https://water.weather.gov/ahps2/index.php?wfo=sju" target="_blank" class="res-card">
          <span class="res-icon">ğŸï¸</span><span class="res-name">AHPS HidrologÃ­a</span><span class="res-url">RÃ­os PR en tiempo real</span>
        </a>
        <a href="https://www.nhc.noaa.gov/" target="_blank" class="res-card">
          <span class="res-icon">ğŸŒ€</span><span class="res-name">NHC Ciclones</span><span class="res-url">nhc.noaa.gov</span>
        </a>
        <a href="https://www.ndbc.noaa.gov/" target="_blank" class="res-card">
          <span class="res-icon">ğŸŒŠ</span><span class="res-name">NDBC Boyas</span><span class="res-url">ndbc.noaa.gov</span>
        </a>
        <a href="https://www.spcpr.pr.gov/" target="_blank" class="res-card">
          <span class="res-icon">ğŸš’</span><span class="res-name">SCEM PR</span><span class="res-url">Manejo de Emergencias</span>
        </a>
        <a href="https://waterdata.usgs.gov/pr/nwis/rt" target="_blank" class="res-card">
          <span class="res-icon">ğŸ“ˆ</span><span class="res-name">USGS RÃ­os PR</span><span class="res-url">waterdata.usgs.gov</span>
        </a>
        <a href="https://www.dtop.pr.gov/" target="_blank" class="res-card">
          <span class="res-icon">ğŸ›£ï¸</span><span class="res-name">DTOP Carreteras</span><span class="res-url">Cierres y condiciones viales</span>
        </a>
        <a href="https://tidesandcurrents.noaa.gov/stationhome.html?id=9752695" target="_blank" class="res-card">
          <span class="res-icon">ğŸŒŠ</span><span class="res-name">Mareas Arecibo</span><span class="res-url">NOAA â€” ID 9752695</span>
        </a>
      </div>
    </div>
  </div>

</main>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• BOTTOM BAR â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<footer class="bottom-bar">
  <div class="sources">
    <span class="lbl">Fuentes:</span>
    <a href="https://api.weather.gov/" target="_blank">NWS API</a>
    <a href="https://www.ndbc.noaa.gov/" target="_blank">NDBC</a>
    <a href="https://water.weather.gov/" target="_blank">AHPS</a>
    <a href="https://waterdata.usgs.gov/" target="_blank">USGS</a>
  </div>
  <div id="last-updated">Cargando...</div>
</footer>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• PWA INSTALL BANNER â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="install-banner">
  <p>ğŸ“² <strong>Instala esta app en tu celular</strong><br>Accede al monitor sin abrir el navegador</p>
  <div class="btn-row">
    <button id="btn-install" onclick="installApp()">Instalar</button>
    <button id="btn-dismiss" onclick="document.getElementById('install-banner').style.display='none'">Ahora no</button>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SCRIPTS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// RELOJ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function updateClock() {
  const now = new Date();
  const opt = { timeZone:'America/Puerto_Rico' };
  document.getElementById('clock').textContent =
    now.toLocaleTimeString('es-PR', {...opt, hour12:true}).toUpperCase();
  document.getElementById('date-display').textContent =
    now.toLocaleDateString('es-PR', {...opt, weekday:'long', year:'numeric', month:'long', day:'numeric'}).toUpperCase();
}
setInterval(updateClock, 1000);
updateClock();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TABS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function switchTab(name) {
  document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  document.getElementById('panel-' + name).classList.add('active');
  event.currentTarget.classList.add('active');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PWA INSTALL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let deferredPrompt = null;
window.addEventListener('beforeinstallprompt', e => {
  e.preventDefault();
  deferredPrompt = e;
  document.getElementById('install-btn').style.display = 'block';
  setTimeout(() => { document.getElementById('install-banner').style.display = 'block'; }, 3000);
});
function showInstallPrompt() { if (deferredPrompt) installApp(); }
function installApp() {
  if (!deferredPrompt) return;
  deferredPrompt.prompt();
  deferredPrompt.userChoice.then(() => {
    deferredPrompt = null;
    document.getElementById('install-banner').style.display = 'none';
    document.getElementById('install-btn').style.display = 'none';
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ALERTAS NWS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function loadAlerts() {
  try {
    const res = await fetch('https://api.weather.gov/alerts/active?area=PR&limit=25');
    const data = await res.json();
    const alerts = data.features || [];

    // Banner (siempre visible)
    const banner = document.getElementById('alert-banner');
    if (alerts.length > 0) {
      banner.style.display = 'block';
      banner.innerHTML = alerts.slice(0,4).map(a => {
        const p = a.properties;
        const sev = p.severity;
        let cls = 'advisory';
        if (sev==='Extreme'||sev==='Severe') cls='';
        else if (sev==='Moderate') cls='warn';
        const expires = p.expires
          ? new Date(p.expires).toLocaleString('es-PR',{timeZone:'America/Puerto_Rico',weekday:'short',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'})
          : 'Vigente';
        const desc = (p.headline||p.description||'').substring(0,240);
        return `<div class="alert-item ${cls}">
          <div class="alert-header">
            <span class="alert-type">âš ï¸ ${p.event||'Alerta'}</span>
            <span class="alert-expires">Expira: ${expires}</span>
          </div>
          <div class="alert-title">${p.headline ? p.headline.split('*')[0].trim().substring(0,90) : p.event}</div>
          <div class="alert-desc">${desc}${(p.headline||p.description||'').length>240?'...':''}</div>
        </div>`;
      }).join('');
    } else {
      banner.style.display = 'none';
    }

    // Panel alertas completo
    const detail = document.getElementById('alerts-detail-full');
    if (alerts.length===0) {
      detail.innerHTML = `<div class="status-indicator"><span class="dot safe"></span><span style="color:var(--safe)">SIN ALERTAS ACTIVAS PARA PUERTO RICO</span></div>
        <div class="sub-info" style="margin-top:10px">No hay alertas meteorolÃ³gicas vigentes en este momento. Siempre verifique weather.gov/sju para la informaciÃ³n mÃ¡s reciente.</div>`;
    } else {
      detail.innerHTML = `<div style="margin-bottom:12px;font-family:'Space Mono',monospace;font-size:.65rem;color:var(--muted)">${alerts.length} ALERTA${alerts.length>1?'S':''} ACTIVA${alerts.length>1?'S':''}</div>` +
        alerts.map(a => {
          const p = a.properties;
          const sev = p.severity;
          let color = 'var(--gold)';
          if (sev==='Extreme') color='var(--danger)';
          else if (sev==='Severe') color='var(--warn)';
          const exp = p.expires ? new Date(p.expires).toLocaleString('es-PR',{timeZone:'America/Puerto_Rico',weekday:'short',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'}) : 'â€”';
          const desc = (p.description||'').substring(0,400);
          return `<div style="border:1px solid var(--border);padding:14px;margin-bottom:10px;background:rgba(14,58,110,.25)">
            <div style="display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;gap:6px;margin-bottom:8px">
              <span style="font-weight:700;font-size:.9rem;color:${color};letter-spacing:.04em;text-transform:uppercase">${p.event}</span>
              <span style="font-family:'Space Mono',monospace;font-size:.58rem;color:var(--muted)">Expira: ${exp}</span>
            </div>
            <div style="font-family:'Space Mono',monospace;font-size:.6rem;color:var(--muted);margin-bottom:8px">ğŸ“ ${(p.areaDesc||'').split(';').slice(0,3).join(' â€¢ ')}</div>
            ${desc ? `<div style="font-family:'Space Mono',monospace;font-size:.62rem;color:var(--text);line-height:1.6">${desc}${(p.description||'').length>400?'...':''}</div>` : ''}
          </div>`;
        }).join('');
    }

    computeFloodRisk(alerts);
  } catch(e) {
    const msg = `<div class="sub-info" style="color:var(--warn)">âš ï¸ No se pudo conectar con la API del NWS.<br><br><a href="https://www.weather.gov/sju/" target="_blank" style="color:var(--cyan)">â†’ Ver alertas manualmente en weather.gov/sju</a></div>`;
    document.getElementById('alerts-detail-full').innerHTML = msg;
    computeFloodRisk([]);
  }
}

function computeFloodRisk(alerts) {
  const flood = alerts.filter(a => {
    const ev = (a.properties.event||'').toLowerCase();
    return ev.includes('flood') || ev.includes('flash') || ev.includes('inunda');
  });
  let pct=10, label='BAJO', color='var(--safe)';
  if (flood.some(a=>a.properties.severity==='Extreme'))      { pct=95; label='EXTREMO'; color='var(--danger)'; }
  else if (flood.some(a=>a.properties.severity==='Severe'))  { pct=72; label='ALTO';    color='var(--warn)'; }
  else if (flood.some(a=>a.properties.severity==='Moderate')){ pct=50; label='MODERADO';color='var(--gold)'; }
  else if (flood.length>0)                                    { pct=30; label='BAJO-MOD';color='var(--cyan)'; }
  setTimeout(()=>{
    const g=document.getElementById('gauge-fill');
    g.style.width=pct+'%';
    g.style.background=`linear-gradient(90deg,var(--ocean),${color})`;
    const rv=document.getElementById('risk-value');
    rv.textContent=pct+'%'; rv.style.color=color;
    const rl=document.getElementById('risk-label');
    rl.textContent=label; rl.style.color=color;
  },400);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PRONÃ“STICO NWS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function loadForecast() {
  try {
    const pr = await fetch('https://api.weather.gov/points/18.4736,-66.7220');
    const pd = await pr.json();
    const [fcRes, fhRes] = await Promise.all([
      fetch(pd.properties.forecast),
      fetch(pd.properties.forecastHourly)
    ]);
    const fcData = await fcRes.json();
    const periods = fcData.properties.periods || [];

    const iconMap = {
      sunny:'â˜€ï¸',clear:'ğŸŒ™',partly:'â›…','mostly cloudy':'â˜ï¸',cloudy:'â˜ï¸',
      rain:'ğŸŒ§ï¸',showers:'ğŸŒ¦ï¸',thunder:'â›ˆï¸',storm:'ğŸŒ©ï¸',wind:'ğŸ’¨',
      fog:'ğŸŒ«ï¸',tropical:'ğŸŒ€',hurricane:'ğŸŒ€',snow:'ğŸŒ¨ï¸',hail:'ğŸŒ¨ï¸'
    };
    const getIcon = sf => {
      const l = sf.toLowerCase();
      for (const [k,v] of Object.entries(iconMap)) { if(l.includes(k)) return v; }
      return 'ğŸŒ¤ï¸';
    };

    const dayPeriods = periods.filter(p=>p.isDaytime).slice(0,7);
    const nightPeriods = periods.filter(p=>!p.isDaytime).slice(0,7);

    const renderGrid = (days, containerId) => {
      const el = document.getElementById(containerId);
      if (!el) return;
      el.innerHTML = days.map(p=>{
        const d = new Date(p.startTime);
        const dayName = d.toLocaleDateString('es-PR',{weekday:'short',timeZone:'America/Puerto_Rico'}).toUpperCase();
        const icon = getIcon(p.shortForecast||'');
        const prob = p.probabilityOfPrecipitation?.value;
        const probStr = prob!=null ? prob+'%' : 'â€”';
        let rc = prob==null?'var(--muted)':prob<30?'var(--safe)':prob<60?'var(--gold)':prob<80?'var(--warn)':'var(--danger)';
        return `<div class="forecast-day">
          <div class="day-name">${dayName}</div>
          <span class="day-icon">${icon}</span>
          <div class="day-temp">${p.temperature}Â°${p.temperatureUnit}</div>
          <div class="day-rain" style="color:${rc}">ğŸŒ§ ${probStr}</div>
          <div class="day-short">${(p.shortForecast||'').substring(0,26)}</div>
        </div>`;
      }).join('');
    };

    renderGrid(dayPeriods, 'forecast-grid-home');
    renderGrid(dayPeriods, 'forecast-grid-full');

    // Night forecast
    const nightEl = document.getElementById('night-forecast');
    if (nightEl) {
      nightEl.innerHTML = nightPeriods.slice(0,4).map(p=>{
        const d = new Date(p.startTime);
        const dayName = d.toLocaleDateString('es-PR',{weekday:'long',timeZone:'America/Puerto_Rico'}).toUpperCase();
        const prob = p.probabilityOfPrecipitation?.value;
        let rc = prob==null?'var(--muted)':prob<30?'var(--safe)':prob<60?'var(--gold)':prob<80?'var(--warn)':'var(--danger)';
        return `<div style="border-bottom:1px solid var(--border);padding:8px 0">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:2px">
            <span style="font-weight:700;font-size:.8rem">${getIcon(p.shortForecast||'')} ${dayName} â€” Noche</span>
            <span style="font-family:'Space Mono',monospace;font-size:.62rem;color:${rc}">ğŸŒ§ ${prob!=null?prob+'%':'â€”'}</span>
          </div>
          <div style="font-family:'Space Mono',monospace;font-size:.6rem;color:var(--muted);line-height:1.5">${(p.detailedForecast||'').substring(0,160)}...</div>
        </div>`;
      }).join('');
    }

    // Rain info
    const today = periods[0];
    const tomorrow = periods.find(p=>p.isDaytime && periods.indexOf(p)>0);
    const todayR = today?.probabilityOfPrecipitation?.value??'â€”';
    const tomR   = tomorrow?.probabilityOfPrecipitation?.value??'â€”';
    const todayDet = today?.detailedForecast||'';
    document.getElementById('rain-info').innerHTML = `
      <div style="margin-bottom:14px">
        <div style="font-family:'Space Mono',monospace;font-size:.58rem;color:var(--muted);letter-spacing:.1em;text-transform:uppercase;margin-bottom:2px">HOY</div>
        <div style="font-size:clamp(1.8rem,5vw,3rem);font-weight:900;line-height:1;color:${todayR>60?'var(--warn)':'var(--safe)'}">${todayR}%</div>
        <div style="font-family:'Space Mono',monospace;font-size:.58rem;color:var(--muted);margin-top:2px">PROB. PRECIPITACIÃ“N</div>
      </div>
      <div style="margin-bottom:10px">
        <div style="font-family:'Space Mono',monospace;font-size:.58rem;color:var(--muted);text-transform:uppercase;letter-spacing:.1em;margin-bottom:2px">MAÃ‘ANA</div>
        <div style="font-size:1.6rem;font-weight:700;color:${tomR>60?'var(--warn)':'var(--text)'}">${tomR}%</div>
      </div>
      <div style="font-family:'Space Mono',monospace;font-size:.6rem;color:var(--muted);line-height:1.6;border-top:1px solid var(--border);padding-top:8px">
        ${todayDet.substring(0,180)}${todayDet.length>180?'...':''}
      </div>`;

    // Forecast detail
    const fdEl = document.getElementById('forecast-detail');
    if (fdEl && dayPeriods.length > 0) {
      fdEl.innerHTML = dayPeriods.slice(0,3).map(p => {
        const d = new Date(p.startTime);
        const dayName = d.toLocaleDateString('es-PR',{weekday:'long',month:'short',day:'numeric',timeZone:'America/Puerto_Rico'}).toUpperCase();
        return `<div style="border-bottom:1px solid var(--border);padding:8px 0">
          <div style="font-weight:700;font-size:.82rem;margin-bottom:4px">${getIcon(p.shortForecast||'')} ${dayName}</div>
          <div style="font-family:'Space Mono',monospace;font-size:.6rem;color:var(--muted);line-height:1.5">${(p.detailedForecast||'').substring(0,180)}...</div>
        </div>`;
      }).join('');
    }

    // Status summary
    const hasRain = todayR > 50;
    const hasHeavy = todayR > 80;
    document.getElementById('status-summary').innerHTML = `
      <div style="display:flex;flex-direction:column;gap:10px">
        <div class="status-indicator"><span class="dot ${hasHeavy?'danger':hasRain?'warn':'safe'}"></span><span style="color:${hasHeavy?'var(--danger)':hasRain?'var(--warn)':'var(--safe)'}">Lluvia hoy: ${hasHeavy?'ALTA':hasRain?'MODERADA':'BAJA'}</span></div>
        <div class="status-indicator"><span class="dot warn"></span><span style="color:var(--warn)">Costa Norte: AVISO MARINO</span></div>
        <div class="status-indicator"><span class="dot info"></span><span style="color:var(--cyan)">RÃ­os: ver pestaÃ±a RÃOS</span></div>
        <div style="border-top:1px solid var(--border);margin-top:6px;padding-top:10px;font-family:'Space Mono',monospace;font-size:.62rem;color:var(--muted);line-height:2">
          ğŸ“ <a href="tel:7872534586" style="color:var(--cyan)">NWS SJU: (787) 253-4586</a><br>
          ğŸ†˜ <a href="tel:911" style="color:var(--danger);font-weight:700">Emergencias: 9-1-1</a>
        </div>
      </div>`;

  } catch(e) {
    ['forecast-grid-home','forecast-grid-full'].forEach(id => {
      const el = document.getElementById(id);
      if(el) el.innerHTML = `<div style="grid-column:1/-1;font-family:'Space Mono',monospace;font-size:.65rem;color:var(--warn)">âš ï¸ Sin conexiÃ³n. <a href="https://forecast.weather.gov/MapClick.php?CityName=Arecibo&state=PR" target="_blank" style="color:var(--cyan)">â†’ Ver en NWS</a></div>`;
    });
    document.getElementById('rain-info').innerHTML = `<div style="font-family:'Space Mono',monospace;font-size:.65rem;color:var(--warn)">Sin conexiÃ³n. <a href="https://forecast.weather.gov" target="_blank" style="color:var(--cyan)">NWS â†—</a></div>`;
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MARÃTIMO (datos fijos NWS + boyas)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function loadMaritime() {
  const maritime = [
    { label:'Oleaje',    value:'9-10 pies', level:'danger' },
    { label:'Vientos',   value:'E 10-20 kt, rÃ¡f. 30 kt', level:'warn' },
    { label:'PerÃ­odo',   value:'8-10 seg.', level:'warn' },
    { label:'Corrientes',value:'Peligrosas', level:'danger' },
    { label:'Surf',      value:'Peligroso', level:'danger' },
    { label:'Estado',    value:'AVISO VIGENTE', level:'danger' },
  ];

  const rows = maritime.map(m=>`<tr><td>${m.label}</td><td><span class="marine-level ${m.level}">${m.value}</span></td></tr>`).join('');

  ['maritime-table-home','maritime-table-full'].forEach(id=>{
    const el=document.getElementById(id);
    if(el) el.innerHTML = rows;
  });

  ['maritime-ribbon','maritime-ribbon-2'].forEach(id=>{
    const el=document.getElementById(id);
    if(el) el.style.display='block';
  });

  // Boyas cercanas (estÃ¡ticas con links a datos en vivo)
  const buoyEl = document.getElementById('buoy-grid');
  if (buoyEl) {
    buoyEl.innerHTML = `
      <div class="buoy-card">
        <div class="buoy-name">ğŸ”´ Boya 41053 â€” San Juan</div>
        <div class="buoy-data">
          Oleaje: <span>~2.8 m</span><br>
          Temp. Agua: <span>~27Â°C</span><br>
          Viento: <span>E 18 kt</span><br>
          <a href="https://www.ndbc.noaa.gov/station_page.php?station=41053" target="_blank" style="color:var(--cyan)">â†’ Ver datos en vivo</a>
        </div>
      </div>
      <div class="buoy-card">
        <div class="buoy-name">ğŸŸ¡ Boya 41047 â€” AtlÃ¡ntico N</div>
        <div class="buoy-data">
          Oleaje: <span>~2.5 m</span><br>
          Temp. Agua: <span>~27Â°C</span><br>
          PerÃ­odo: <span>~9 seg.</span><br>
          <a href="https://www.ndbc.noaa.gov/station_page.php?station=41047" target="_blank" style="color:var(--cyan)">â†’ Ver datos en vivo</a>
        </div>
      </div>
      <div class="buoy-card">
        <div class="buoy-name">ğŸŸ¡ Boya BEPB4 â€” Isla de PÃ¡jaros</div>
        <div class="buoy-data">
          MÃ¡s cercana a Arecibo<br>
          Costa norte PR<br>
          <a href="https://www.ndbc.noaa.gov/station_page.php?station=bepb4" target="_blank" style="color:var(--cyan)">â†’ Ver datos en vivo</a>
        </div>
      </div>
      <div class="buoy-card">
        <div class="buoy-name">ğŸ“¡ Todas las Boyas</div>
        <div class="buoy-data">
          Mapa interactivo<br>
          NDBC â€” NOAA<br>
          <a href="https://www.ndbc.noaa.gov/obs.shtml?lat=18.5&lon=-66.7&zoom=8" target="_blank" style="color:var(--cyan)">â†’ Ver mapa completo</a>
        </div>
      </div>`;
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CARGA PRINCIPAL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function loadAllData() {
  const btn = document.getElementById('refresh-btn');
  btn.textContent = 'â†» Actualizando...';
  btn.classList.add('active');
  await Promise.all([loadAlerts(), loadForecast()]);
  loadMaritime();
  const now = new Date().toLocaleString('es-PR',{timeZone:'America/Puerto_Rico'});
  document.getElementById('last-updated').textContent = 'â¬†ï¸ ' + now.toUpperCase() + ' AST';
  btn.textContent = 'âŸ³ Actualizar';
  btn.classList.remove('active');
}

// Arranque
loadAllData();

// Auto-refresh cada 10 minutos
setInterval(loadAllData, 10 * 60 * 1000);
</script>

</body>
</html>
